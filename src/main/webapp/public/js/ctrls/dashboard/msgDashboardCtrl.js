// Generated by CoffeeScript 1.10.0
define(['can/control', 'can', 'base', 'Auth', 'reqwest', '_', 'datatables.net', 'datatables.net-bs', 'datatables.net-responsive', 'datatables.net-responsive-bs'], function(Control, can, base, Auth, reqwest) {
  var pageData;
  pageData = new can.Map();
  return Control.extend({
    init: function(el, data) {
      this.element.html(can.view('../public/view/home/dashboard/msgDashboard.html', pageData));
      return $('#msgList').DataTable({
        paging: false,
        ordering: false,
        ajax: {
          url: Auth.apiHost + "msg/page?_=" + (Date.now()),
          dataSrc: function(data) {
            return data;
          }
        },
        columns: [
          {
            data: 'projectName'
          }, {
            data: 'creator',
            render: function(data) {
              return (data != null ? data.username : void 0) || '';
            }
          }, {
            data: 'elc'
          }, {
            data: 'type'
          }, {
            data: 'workContent'
          }, {
            data: 'solution'
          }, {
            data: 'remark'
          }, {
            data: 'date',
            render: function(data, d, row) {
              if (data) {
                return new Date(data).toLocaleDateString();
              } else {
                return '';
              }
            }
          }
        ]
      });
    }
  });
});
