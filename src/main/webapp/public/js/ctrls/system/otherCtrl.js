// Generated by CoffeeScript 1.10.0
define(['can/control', 'can', 'Auth', 'base', 'reqwest', 'bootbox', 'select2cn'], function(Ctrl, can, Auth, base, reqwest, bootbox) {
  return Ctrl.extend({
    init: function(el, data) {
      if (!can.base) {
        new base('', data);
      }
      this.element.html(can.view('../public/view/home/system/other.html'));
      $('#days').select2({
        language: 'zh-CN',
        width: '80px',
        theme: "bootstrap"
      });
      $('#days').change(function() {
        return $('#downloadBtn').attr('href', Auth.apiHost + "question/report/download?_=" + (Date.now()) + "&days=" + ($(this).val()));
      });
      $('#days').trigger('change');
      return $('#pushBtn').click(function() {
        return reqwest({
          url: Auth.apiHost + "question/report/push?_=" + (Date.now()) + "&days=" + ($("#days").val()),
          type: 'html'
        }).then(function(data) {
          return bootbox.alert('推送成功！');
        }).fail(function() {
          return bootbox.alert('推送失败！');
        });
      });
    }
  });
});
